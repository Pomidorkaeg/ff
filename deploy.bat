@echo off
echo ========================================
echo Подготовка к развертыванию сайта...
echo ========================================
echo.

:: Проверка наличия Node.js
where node >nul 2>nul
if %ERRORLEVEL% neq 0 (
    echo ОШИБКА: Node.js не установлен!
    echo Пожалуйста, установите Node.js с сайта https://nodejs.org/
    echo.
    pause
    exit /b 1
)

:: Сборка проекта
echo Сборка проекта...
call npm run build
if %ERRORLEVEL% neq 0 (
    echo ОШИБКА: Не удалось собрать проект!
    echo.
    pause
    exit /b 1
)
echo.
echo Проект успешно собран!
echo.

:: Создание архива
echo Создание архива для загрузки...
powershell Compress-Archive -Path "dist/*" -DestinationPath "site.zip" -Force
if %ERRORLEVEL% neq 0 (
    echo ОШИБКА: Не удалось создать архив!
    echo.
    pause
    exit /b 1
)
echo.
echo Архив успешно создан!
echo.

echo ========================================
echo Инструкции по развертыванию:
echo ========================================
echo.
echo 1. Войдите в панель управления вашего хостинга
echo 2. Найдите раздел "Файловый менеджер" или "FTP"
echo 3. Загрузите содержимое папки dist на хостинг
echo 4. Если у вас есть файл .htaccess, убедитесь что он загружен
echo.
echo Файл site.zip готов к загрузке на хостинг!
echo.
echo Важно: После загрузки файлов на хостинг:
echo - Убедитесь, что все файлы загружены корректно
echo - Проверьте права доступа к файлам (обычно 644 для файлов, 755 для папок)
echo - Если используете Apache, проверьте наличие и настройки .htaccess
echo.
echo ========================================
echo Готово! Теперь вы можете загрузить файлы на хостинг
echo ========================================
echo.
pause 