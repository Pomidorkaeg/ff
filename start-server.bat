@echo off
echo ========================================
echo Подготовка к запуску сервера...
echo ========================================
echo.

:: Проверка наличия Node.js
where node >nul 2>nul
if %ERRORLEVEL% neq 0 (
    echo ОШИБКА: Node.js не установлен!
    echo Пожалуйста, установите Node.js с сайта https://nodejs.org/
    echo.
    pause
    exit /b 1
)

:: Установка зависимостей
echo Установка необходимых пакетов...
call npm install
if %ERRORLEVEL% neq 0 (
    echo ОШИБКА: Не удалось установить зависимости!
    echo.
    pause
    exit /b 1
)
echo.
echo Все пакеты успешно установлены!
echo.

echo ========================================
echo Запуск сервера разработки...
echo ========================================
echo.

start cmd /k "npm run dev && echo Сервер остановлен! && pause"

echo.
echo ========================================
echo Сервер успешно запущен!
echo.
echo Ваш сайт доступен по адресу:
echo http://localhost:8080
echo.
echo Для остановки сервера закройте второе окно терминала
echo или нажмите Ctrl+C в нём.
echo ========================================
echo.
echo Это окно оставьте открытым для информации.
echo.
pause
